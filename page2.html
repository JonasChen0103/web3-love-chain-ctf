<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Web3.0戀鏈資訊營 - 密碼學CTF第二關</title>
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="stylesheet" href="styles/components.css" />
  <link rel="stylesheet" href="styles/vigenere.css" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="theme-valentine">
<div class="container">
  <h1>💕 第二關</h1>

  <!-- 進度指示器 -->
  <div class="progress-indicator">
    <div class="progress-step completed" data-level="1">1</div>
    <div class="progress-step active" data-level="2">2</div>
    <div class="progress-step" data-level="3">3</div>
  </div>

  <div class="section" id="access-denied" style="display: none;">
    <h2>⚠️ 存取受限</h2>
    <p>請先完成第一關才能進入第二關。</p>
    <div class="navigation-section">
      <a href="index.html" class="nav-btn">回到第一關</a>
    </div>
  </div>

  <div class="section" id="main-content">
    <h2>第二封信</h2>
    <p>哇，你真的解開了第一道謎題！我開始對你刮目相看了。💖</p>
    <p>其實我一直都是個很愛玩文字遊戲的人，從小就喜歡在日記裡寫一些只有自己看得懂的密碼。你知道嗎？我有個習慣，每當我很喜歡一個人的時候，就會不自覺地一直說某個英文單字...</p>
    <p>我的朋友們都笑我，說我一激動就會冒出那個詞，像是口頭禪一樣。你應該猜得到是哪個詞吧？<span class="tooltip" data-tooltip="想想看...四個字母，用來表達最深情感的詞">😊</span></p>

    <p>如果你真的了解我，就幫我解開這段話吧：</p>
    <pre id="vigenere-text" class="cipher-text">tkvrehjfpmjycpvfp</pre>

    <div class="input-group">
      <textarea id="vigenere-input" placeholder="請輸入解密後的內容" class="cipher-input"></textarea>
      <div class="button-group">
        <button onclick="Level2.checkAnswer()" id="vigenere-submit" class="primary-btn">提交答案</button>
        <button onclick="Level2.showHint()" class="secondary-btn">需要提示？</button>
        <button onclick="Level2.showTools()" class="tools-btn" id="tools-btn">解密工具</button>
      </div>
    </div>

    <div id="vigenere-result" class="result-display"></div>
  </div>

  <!-- 解密工具區域 -->
  <div class="section hidden" id="vigenere-tools">
    <h2>🔧 解密工具</h2>

    <!-- 維吉尼亞密碼表 -->
    <div class="tool-card vigenere-table-card">
      <div class="vigenere-table-container">
        <table class="vigenere-table" id="vigenere-table">
          <!-- 將由JavaScript生成 -->
        </table>
      </div>

      <div class="hint cipher-reminder">
        <strong>💡 溫馨提醒：</strong>
        密文：<code>tkvrehjfpmjycpvfp</code><br>
        記住，關鍵就在我剛才說的那個「口頭禪」！
      </div>
    </div>
  </div>

  <!-- 導航區域 -->
  <div class="navigation-section">
    <a href="index.html" class="nav-btn secondary">← 回到第一關</a>
  </div>
</div>

<!-- JavaScript -->
<script src="scripts/config.js"></script>
<script src="scripts/crypto.js"></script>
<script src="scripts/security.js"></script>
<script src="scripts/storage.js"></script>
<script src="scripts/ui.js"></script>
<script src="scripts/level2.js"></script>
<script src="scripts/game.js"></script>
</body>
</html>